!function(t){"use strict";function i(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}function e(t,i,e){var n;return function(){var a=this,s=arguments,o=function(){n=null,e||t.apply(a,s)},r=e&&!n;clearTimeout(n),n=setTimeout(o,i),r&&t.apply(a,s)}}function n(t,e){this.DOM={},this.DOM.el=t,this.options=i({},this.options),i(this.options,e),this._init()}var a={width:t.innerWidth,height:t.innerHeight};n.prototype.options={movable:"all",layout:"vertical",animeduration:1300,animeeasing:"easeOutExpo",animedelay:0,onOpenTab:function(t,i){return!1},onCloseTab:function(t,i){return!1},onOpenBarsUpdate:function(t,i,e){return!1}},n.prototype._init=function(){this.DOM.tabs=[].slice.call(this.DOM.el.querySelectorAll(".tabs_nav--item")),this.DOM.bars=[].slice.call(this.DOM.el.querySelectorAll(".tabs_nav--bar")),this.totalTabs=this.DOM.tabs.length,this.extraEl=document.querySelector(this.options.extramovable),this._initEvents()},n.prototype._initEvents=function(){var i=this;this._openTabFn=function(t){i.isOpen||i._openTab(t.target)},this.DOM.tabs.forEach(function(t){t.addEventListener("click",i._openTabFn)}),this.debounceResizeFn=e(function(){i._resize()},10),t.addEventListener("resize",this.debounceResizeFn),enquire.register("screen and (min-width:0) and (max-width:40em)",{match:function(){i.isOpen||i.isVisible||i.DOM.el.classList.add("tabs_nav--hidden")}}),enquire.register("screen and (min-width:40em)",{match:function(){i.DOM.el.classList.contains("tabs_nav--hidden-default")||i.DOM.el.classList.remove("tabs_nav--hidden")}})},n.prototype._openTab=function(t){if(this.isAnimating)return!1;this.isAnimating=!0,this.current=this.DOM.tabs.indexOf(t);var i=t.getBoundingClientRect(),e={left:i.left,top:i.top,width:i.width,height:i.height},n=this;this.dim={measure:"vertical"===this.options.layout?e.width:e.height,position:"vertical"===this.options.layout?e.left:e.top,win:"vertical"===this.options.layout?a.width:a.height},this.DOM.bars.forEach(function(t){t.style.transformOrigin="vertical"===n.options.layout?"0% 50%":"50% 0%"}),this.DOM.tabs.forEach(function(t,i){t.style.zIndex=i===n.current?100:1});var s={targets:"all"===this.options.movable?this.DOM.tabs:this.DOM.tabs[this.current]},o={targets:"all"===this.options.movable?this.DOM.bars:this.DOM.bars[this.current]},r=function(t,i,e){if(1===e||0===n.options.animedelay)return 0;var a=e+1,s=Math.floor(a/2);return n.current>=s?i<=n.current?i*n.options.animedelay:(a-i-1)*n.options.animedelay:i<n.current?i*n.options.animedelay:(a-i-1)*n.options.animedelay},l=function(t,i,e){if(i===n.current||1===e)return-1*n.dim.position;return i>n.current?n.dim.win-(n.dim.position+n.dim.measure)-1:-1*n.dim.position+1},h=function(t,i,e){return i===n.current||1===e?n.dim.win/n.dim.measure:1};if(s.duration=o.duration=this.options.animeduration,s.easing=o.easing=this.options.animeeasing,s.delay=o.delay=r,s["vertical"===this.options.layout?"translateX":"translateY"]=l,o["vertical"===this.options.layout?"scaleX":"scaleY"]=h,s.complete=function(){n.isAnimating=!1,n.isOpen=!0,n.options.onOpenTab(n.current,t)},o.update=function(i){n.options.onOpenBarsUpdate(i,n.current,t)},anime(s),anime(o),this.extraEl){var u={targets:this.extraEl,duration:this.options.animeduration,easing:this.options.animeeasing,delay:0},c=this.extraEl.getBoundingClientRect(),p="vertical"===this.options.layout?this.dim.win-(this.dim.position+this.dim.measure)+Math.abs(c.left-this.dim.position)+this.dim.measure:-1*this.dim.position;u["vertical"===this.options.layout?"translateX":"translateY"]=p,anime(u)}},n.prototype._closeTab=function(t){if(this.isAnimating)return!1;this.isAnimating=!0;var i=this,e={targets:"all"===this.options.movable?this.DOM.tabs:this.DOM.tabs[this.current]},n={targets:"all"===this.options.movable?this.DOM.bars:this.DOM.bars[this.current]},a=function(t,e,n){return 1===n||0===i.options.animedelay?0:Math.abs(i.current-e)*i.options.animedelay};if(e.duration=n.duration=this.options.animeduration,e.easing=n.easing=this.options.animeeasing,e.delay=n.delay=a,e["vertical"===this.options.layout?"translateX":"translateY"]=0,n["vertical"===this.options.layout?"scaleX":"scaleY"]=1,e.complete=function(){t.style.zIndex=1,i.isAnimating=!1,i.isOpen=!1,i.options.onCloseTab(i.current,t)},anime(e),anime(n),this.extraEl){var s={targets:this.extraEl,duration:this.options.animeduration,easing:this.options.animeeasing,delay:Math.abs(this.current-this.totalTabs)*this.options.animedelay};s["vertical"===this.options.layout?"translateX":"translateY"]=0,anime(s)}},n.prototype.close=function(t){this._closeTab(t||this.DOM.tabs[this.current])},n.prototype.show=function(t){var i=this;this.isVisible=!0,this.DOM.tabs.forEach(function(t){var e=t.querySelector(".tabs_nav--bar"),n=t.querySelector(".tabs_nav--title");e.style.transformOrigin="50% 50%",e.style.transform="vertical"===i.options.layout?"scaleX(0)":"scaleY(0)",n.style.opacity=0,n.style.transform="vertical"===i.options.layout?"translateX(10) rotate(-90)":"translateY(10)"}),this.DOM.el.classList.remove("tabs_nav--hidden"),anime.remove(this.DOM.bars);var e={targets:this.DOM.bars,duration:500,delay:function(t,i){return 50*i},easing:"easeOutExpo",complete:function(){"function"==typeof t&&t.call()}};e["vertical"===this.options.layout?"scaleX":"scaleY"]=[0,1],anime(e);var n=this.DOM.el.querySelectorAll(".tabs_nav--vertical > .title");anime.remove(n);var a={targets:n,duration:500,delay:function(t,i){return 50*i},easing:"easeOutExpo",opacity:[0,1]};a["vertical"===this.options.layout?"translateX":"translateY"]=[10,0],a.rotate="vertical"===i.options.layout?[-90,-90]:0,anime(a)},n.prototype.hide=function(t){var i=this;this.isVisible=!1,this.DOM.bars.forEach(function(t){t.style.transformOrigin="50% 50%"}),anime.remove(this.DOM.bars);var e={targets:this.DOM.bars,duration:500,easing:"easeOutExpo",delay:function(t,i,e){return 50*(e-i-1)},complete:function(){i.DOM.el.classList.add("tabs_nav--hidden"),i.DOM.tabs.forEach(function(t){var e=t.querySelector(".tabs_nav--bar"),n=t.querySelector(".tabs_nav--title");e.style.transform="vertical"===i.options.layout?"scaleX(1)":"scaleY(1)",n.style.opacity=1,n.style.transform="vertical"===i.options.layout?"translateX(0) rotate(-90)":"translateY(0)"}),"function"==typeof t&&t.call()}};e["vertical"===this.options.layout?"scaleX":"scaleY"]=[1,0],anime(e);var n=this.DOM.el.querySelectorAll(".tabs_nav--title");anime.remove(n);var a={targets:n,duration:100,delay:function(t,i,e){return 50*(e-i-1)},easing:"linear",opacity:[1,0]};anime(a)},n.prototype.toggleVisibility=function(){if(this.isAnimating)return!1;this.isAnimating=!0;var t=this,i=function(){t.isAnimating=!1};return this.isVisible?(this.hide(i),0):(this.show(i),1)},n.prototype._resize=function(){var i=this;if(a={width:t.innerWidth,height:t.innerHeight},this.isOpen){this.dim.win="vertical"===this.options.layout?a.width:a.height;var e=(this.DOM.tabs[this.current],"vertical"===this.options.layout?"translateX":"translateY"),n="vertical"===this.options.layout?"scaleX":"scaleY";this.DOM.tabs.forEach(function(t,a){if("all"===i.options.movable||"single"===i.options.movable&&a===i.current){var s,o,r=i.DOM.bars[a];a===i.current?(s=-1*i.dim.position,o=i.dim.win/i.dim.measure):(s=a>i.current?i.dim.win-(i.dim.position+i.dim.measure):-1*i.dim.position,o=1),t.style.transform=e+"("+s+"px)",r.style.transform=n+"("+o+")"}}),this.extraEl&&(this.extraEl.style.transform=e+"("+("vertical"===this.options.layout?this.dim.win-(this.dim.position+this.dim.measure):-1*this.dim.position)+"px)")}},t.TabsNav=n}(window);